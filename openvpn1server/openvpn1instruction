Debian:

apt-get install fail2ban;ssh-keygen -t rsa;apt-get install net-tools;apt-get update;apt-get upgrade;apt-get install easy-rsa;echo 1 > /proc/sys/net/ipv4/ip_forward;nano /etc/sysctl.conf;sysctl -p;apt-get install openvpn;cd /etc/openvpn;cp -r /usr/share/easy-rsa/ /etc/openvpn/;cd easy-rsa/;source ./vars;./clean-all; cp openssl-1.0.0.cnf openssl.cnf; ./build-ca;./build-key-server server;./build-key n1;./build-key n2;./build-key n3;./build-dh;openvpn --genkey --secret keys/ta.key;cd keys/;mkdir /etc/openvpn/client;mkdir /etc/openvpn/server; cd /etc/openvpn/;nano client.conf;nano server.conf;mkdir scripts; nano scripts/routes.sh;cp /etc/openvpn/easy-rsa/keys/ca.crt /etc/openvpn; cp /etc/n1.crt /etc/openvpn/client/; cp /etc/n1.key /etc/openvpn/client/;cp /etc/ca.crt /etc/openvpn/client/ ;chmod +x scripts/routes.sh;cd /etc/openvpn/; cd easy-rsa/keys/; cp server.crt server.key dh2048.pem /etc/openvpn/; iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT; iptables -A INPUT -i tun0 -j ACCEPT;iptables -A FORWARD -m state --state RELATED,ESTABLISHED -j ACCEPT;iptables -A FORWARD -s 10.8.0.0/24 -i tun0 -o eth0 -j ACCEPT;iptables -A FORWARD -s 10.8.0.0/24 -i tun0 -o tun1 -j ACCEPT;iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o eth0 -j MASQUERADE; iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o tun1 -j MASQUERADE; apt-get install iptables-persistent;nano /etc/rc.local



Ubuntu:

apt-get install fail2ban;ssh-keygen -t rsa;apt-get install net-tools;apt-get update;apt-get upgrade;apt-get install easy-rsa;echo 1 > /proc/sys/net/ipv4/ip_forward;nano /etc/sysctl.conf;sysctl -p;apt-get install openvpn;cd /etc/openvpn;cp -r /usr/share/easy-rsa/ /etc/openvpn/;cd easy-rsa/;cp vars.example vars;vim vars;./easyrsa init-pki;./easyrsa build-ca nopass;./easyrsa gen-dh;./easyrsa build-client-full n1 nopass;./easyrsa build-client-full n2 nopass;./easyrsa build-client-full n3 nopass;cp /etc/openvpn/easy-rsa/pki/dh.pem /etc/openvpn/dh2048.pem;./easyrsa build-server-full server nopass;cp /etc/openvpn/easy-rsa/pki/private/server.key /etc/openvpn/;cp /etc/openvpn/easy-rsa/pki/ca.crt /etc/openvpn/;cp /etc/openvpn/easy-rsa/pki/issued/server.crt /etc/openvpn/;cp /etc/openvpn/easy-rsa/pki/private/n1.key /etc/openvpn/;cp /etc/openvpn/easy-rsa/pki/issued/n1.crt /etc/openvpn/;cp /etc/openvpn/easy-rsa/pki/private/n2.key /etc/openvpn/;cp /etc/openvpn/easy-rsa/pki/issued/n2.crt /etc/openvpn/;cp /etc/openvpn/easy-rsa/pki/private/n3.key /etc/openvpn/;cp /etc/openvpn/easy-rsa/pki/issued/n3.crt /etc/openvpn/;mkdir /etc/openvpn/client;mkdir /etc/openvpn/server; cd /etc/openvpn/;nano client.conf;nano server.conf;mkdir scripts; nano scripts/routes.sh;cp /etc/openvpn/easy-rsa/keys/ca.crt /etc/openvpn; cp /etc/n1.crt /etc/openvpn/client/; cp /etc/n1.key /etc/openvpn/client/;cp /etc/ca.crt /etc/openvpn/client/ ;chmod +x scripts/routes.sh;cd /etc/openvpn/; cd easy-rsa/keys/; cp server.crt server.key dh2048.pem /etc/openvpn/; iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT; iptables -A INPUT -i tun0 -j ACCEPT;iptables -A FORWARD -m state --state RELATED,ESTABLISHED -j ACCEPT;iptables -A FORWARD -s 10.8.0.0/24 -i tun0 -o eth0 -j ACCEPT;iptables -A FORWARD -s 10.8.0.0/24 -i tun0 -o tun1 -j ACCEPT;iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o eth0 -j MASQUERADE; iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o tun1 -j MASQUERADE; apt-get install iptables-persistent;nano /etc/rc.local
