Debian:

apt-get install fail2ban;apt-get install net-tools;echo 1 > /proc/sys/net/ipv4/ip_forward;nano /etc/sysctl.conf;sysctl -p; ssh-keygen -t rsa; nano /etc/apt/sources.list;apt-get update;apt-get upgrade;apt-get install openssl; apt-get install openvpn;apt-get install easy-rsa;cp -r /usr/share/easy-rsa/ /etc/openvpn/;cd /etc/openvpn;nano /etc/openvpn/server.conf;mkdir -p /etc/openvpn/ccd/server/tun0;nano /etc/openvpn/ccd/server/tun0/client ./;rm -r client/; rm -r server/;rm update-resolv-conf;cd easy-rsa/;source ./vars;./clean-all; cp openssl-1.0.0.cnf openssl.cnf; ./build-ca;./build-key-server server;./build-key n1;./build-key n2;./build-key n3;./build-dh;openvpn --genkey --secret keys/ta.key;cd keys/; cp server.crt server.key ca.crt dh2048.pem ta.key /etc/openvpn/;mkdir /var/log/openvpn ; mkdir /var/log/openvpn/server; mkdir /var/log/openvpn/server/tun0; touch /var/log/openvpn/server/tun0/openvpn.log; chmod +rwx /var/log/openvpn/server/tun0/openvpn.log;touch /var/log/openvpn/server/tun0/openvpn-status.log ;chmod +rwx /var/log/openvpn/server/tun0/openvpn-status.log; cd /etc/openvpn/easy-rsa/keys;scp n1.crt n1.key ca.crt 195.123.245.194:/etc/;iptables -A FORWARD -m state --state RELATED,ESTABLISHED -j ACCEPT;iptables -A FORWARD -i tun0 -o eth0 -s 10.7.0.0/24 -j ACCEPT;iptables -t nat -A POSTROUTING -s 10.7.0.0/24 -o eth0 -j MASQUERADE;iptables-save;vim /etc/openvpn/server.conf;> /var/log/auth.log;> /var/log/openvpn/server/tun0/openvpn.log;> /var/log/openvpn/server/tun0/openvpn-status.log;> /root/.bash_history;apt-get install iptables-persistent



UBUNTU:

apt-get install fail2ban;apt-get install net-tools;echo 1 > /proc/sys/net/ipv4/ip_forward;nano /etc/sysctl.conf;sysctl -p; ssh-keygen -t rsa; nano /etc/apt/sources.list;apt-get update;apt-get upgrade;apt-get install openssl; apt-get install openvpn;apt-get install easy-rsa;cp -r /usr/share/easy-rsa/ /etc/openvpn/;cd /etc/openvpn;nano /etc/openvpn/server.conf;mkdir -p /etc/openvpn/ccd/server/tun0;nano /etc/openvpn/ccd/server/tun0/client ./;rm -r client/; rm -r server/;rm update-resolv-conf;cd easy-rsa/;cd /etc/openvpn/easy-rsa/;cp vars.example vars;vim vars;./easyrsa init-pki;./easyrsa build-ca nopass;./easyrsa gen-dh;./easyrsa build-client-full n1 nopass;cp /etc/openvpn/easy-rsa/pki/dh.pem /etc/openvpn/dh2048.pem;./easyrsa build-server-full server nopass;cp /etc/openvpn/easy-rsa/pki/private/server.key /etc/openvpn/;cp /etc/openvpn/easy-rsa/pki/ca.crt /etc/openvpn/;cp /etc/openvpn/easy-rsa/pki/issued/server.crt /etc/openvpn/;cp /etc/openvpn/easy-rsa/pki/private/n1.key /etc/openvpn/;cp /etc/openvpn/easy-rsa/pki/issued/n1.crt /etc/openvpn/; mkdir -p /var/log/openvpn/server; mkdir /var/log/openvpn/server/tun0; touch /var/log/openvpn/server/tun0/openvpn.log; chmod +rwx /var/log/openvpn/server/tun0/openvpn.log;touch /var/log/openvpn/server/tun0/openvpn-status.log ;chmod +rwx /var/log/openvpn/server/tun0/openvpn-status.log; cd /etc/openvpn/;scp n1.crt n1.key ca.crt 195.123.245.194:/etc/;iptables -A FORWARD -m state --state RELATED,ESTABLISHED -j ACCEPT;iptables -A FORWARD -i tun0 -o enp0s7 -s 10.7.0.0/24 -j ACCEPT;iptables -t nat -A POSTROUTING -s 10.7.0.0/24 -o enp0s7 -j MASQUERADE;iptables-save;vim /etc/openvpn/server.conf;> /var/log/auth.log;> /var/log/openvpn/server/tun0/openvpn.log;> /var/log/openvpn/server/tun0/openvpn-status.log;> /root/.bash_history;apt-get install iptables-persistent
